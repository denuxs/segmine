<div class="flex justify-between mb-4">
  <div class="text-2xl font-bold text-slate-700">Curso</div>

  <button mat-stroked-button color="primary" routerLink="/admin/courses">
    <mat-icon [svgIcon]="'heroicons_solid:arrow-left'"></mat-icon>
    <span>Regresar</span>
  </button>
</div>

<form [formGroup]="courseForm" (ngSubmit)="saveCourse()">
  <div class="flex flex-col p-8 space-y-4 bg-white border rounded-lg">

    <div class="flex flex-col">
      <mat-label class="mb-1 font-medium text-slate-500">Titulo</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <input matInput formControlName="title" id="title" name="title" />
        <mat-error *ngFor="let err of errors['title']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="flex flex-col">
      <mat-label class="mb-1 font-medium text-slate-500">Descripción</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <textarea matInput formControlName="description" id="description" name="description" [rows]="1"></textarea>
        <mat-error *ngFor="let err of errors['description']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="mt-8 text-2xl font-bold text-slate-700">Videos</div>

  <div class="p-8 mt-8 space-y-4 bg-white border rounded-lg" *ngFor="
      let video of courseForm.get('videos')['controls'];
      let i = index;
      trackBy: trackByFn
    ">
    <div class="flex flex-col">
      <mat-label class="mb-1 font-medium text-slate-500">Titulo</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <input matInput id="title" name="title" [formControl]="video.get('title')" />
      </mat-form-field>
    </div>

    <div class="flex flex-col">
      <mat-label class="mb-1 font-medium text-slate-500">Descripción</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <textarea matInput id="description" name="description" [formControl]="video.get('description')"
          [rows]="1"></textarea>
      </mat-form-field>
    </div>

    <div class="flex flex-row space-x-2">
      <div class="flex flex-col flex-auto">
        <mat-label class="mb-1 font-medium text-slate-500">Video URL</mat-label>
        <mat-form-field subscriptSizing="dynamic">
          <input matInput id="url" name="url" [formControl]="video.get('url')" />
        </mat-form-field>
      </div>

      <div class="flex flex-col w-40">
        <mat-label class="mb-1 font-medium text-slate-500">Duración</mat-label>
        <mat-form-field subscriptSizing="dynamic">
          <input matInput id="duration" name="duration" [formControl]="video.get('duration')" />
        </mat-form-field>
      </div>
    </div>

    <div class="flex justify-end">
      <a mat-icon-button color="warn" (click)="removeQuestionField(i)" matTooltip="Eliminar">
        <mat-icon [svgIcon]="'heroicons_solid:trash'"></mat-icon>
      </a>
    </div>
  </div>

  <a mat-flat-button class="mt-4" color="accent" (click)="addQuestionField()">
    <mat-icon [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
    <span>Agregar Video</span>
  </a>

  <div class="flex justify-end">
    <button mat-flat-button color="primary" type="submit" [disabled]="!courseForm.valid">
      <mat-icon [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
      <span>Guardar</span>
    </button>
  </div>
</form>

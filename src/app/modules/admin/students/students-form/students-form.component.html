<div class="flex justify-between mb-4">
  <div class="text-2xl font-bold text-slate-700">Solicitante</div>

  <button mat-stroked-button color="primary" routerLink="/admin/students">
    <mat-icon [svgIcon]="'heroicons_solid:arrow-left'"></mat-icon>
    <span>Regresar</span>
  </button>
</div>

<form [formGroup]="studentForm" (ngSubmit)="saveUser()" class="flex flex-col p-8 space-y-4 bg-white border rounded-lg">

  <div class="flex flex-col items-center mb-4">
    <div class="relative flex items-center justify-center w-32 h-32 overflow-hidden rounded-full ring-4 ring-bg-card">
      <!-- Upload / Remove avatar -->
      <div class="absolute inset-0 z-10 bg-black bg-opacity-50"></div>
      <div class="absolute inset-0 z-20 flex items-center justify-center">
        <div>
          <input id="avatar" name="avatar" class="absolute invisible w-0 h-0 opacity-0 pointer-events-none" type="file"
            [multiple]="false" [accept]="'image/jpeg, image/png'" (change)="uploadImage(imageFileInput.files)"
            #imageFileInput />
          <label class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
            for="avatar" matRipple>
            <mat-icon class="text-white" [svgIcon]="'heroicons_outline:camera'"></mat-icon>
          </label>
        </div>
        <div>
          <a mat-icon-button (click)="removeImage()">
            <mat-icon class="text-white" [svgIcon]="'heroicons_outline:trash'"></mat-icon>
          </a>
        </div>
      </div>
      <!-- Image/Letter -->
      <img alt="avatar" class="object-cover w-full h-full" *ngIf="avatarPreview" [src]="avatarPreview" />
      <div
        class="flex items-center justify-center w-full h-full overflow-hidden font-bold leading-none text-gray-600 uppercase bg-gray-200 rounded text-8xl dark:bg-gray-700 dark:text-gray-200"
        *ngIf="!avatarPreview">
        N
      </div>
    </div>
  </div>

  <div class="flex space-x-2">
    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Nombres</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <input matInput id="first_name" name="first_name" />
      </mat-form-field>
    </div>

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Apellidos</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <input matInput id="last_name" name="last_name" />
      </mat-form-field>
    </div>
  </div>

  <div class="flex space-x-2">

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Fecha Nacimiento</mat-label>
      <mat-form-field class="flex-auto" subscriptSizing="dynamic">
        <input matInput [matDatepicker]="picker1" id="birthday" name="birthday" [formControlName]="'birthday'" />
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
      <ng-container *ngFor="let err of errors['birthday']">
        <mat-error>
          {{ err }}
        </mat-error>
      </ng-container>
    </div>

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Pais</mat-label>
      <mat-form-field class="flex-auto" subscriptSizing="dynamic">
        <mat-select id="country" name="country" formControlName="country">
          <mat-option *ngFor="let country of countries" [value]="country.id">{{ country.name
            }}</mat-option>
        </mat-select>
        <mat-error *ngFor="let err of errors['country']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Departamento</mat-label>
      <mat-form-field class="flex-auto" subscriptSizing="dynamic">
        <mat-select id="department" name="department" formControlName="department">
          <mat-option *ngFor="let dep of departments" [value]="dep.id">{{
            dep.name
            }}</mat-option>
        </mat-select>
        <mat-error *ngFor="let err of errors['department']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>

  </div>

  <div class="flex space-x-2">

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500"> Tipo Identificacion</mat-label>
      <mat-form-field class="flex-auto" subscriptSizing="dynamic">
        <mat-select id="identification_type" name="identification_type" formControlName="identification_type">
          <mat-option value="dni">Cedula</mat-option>
          <mat-option value="passport">Pasaporte</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Identificacion</mat-label>
      <mat-form-field class="flex-auto" subscriptSizing="dynamic">
        <input matInput id="identification" name="identification" formControlName="identification" />
        <ng-container *ngFor="let err of errors['identification']">
          <mat-error>
            {{ err }}
          </mat-error>
        </ng-container>
      </mat-form-field>
    </div>
  </div>

  <div class="flex space-x-2">

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Sitio</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <mat-select id="site" name="site" formControlName="site">
          <mat-option *ngFor="let site of sites" [value]="site.id">{{
            site.name
            }}</mat-option>
        </mat-select>
        <mat-error *ngFor="let err of errors['site']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="flex flex-col flex-auto">
      <mat-label class="mb-1 font-medium text-slate-500">Empresa</mat-label>
      <mat-form-field subscriptSizing="dynamic">
        <input matInput id="company" name="company" formControlName="company" />
        <mat-error *ngFor="let err of errors['company']">
          {{ err }}
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="flex justify-end">
    <button mat-flat-button color="primary" type="submit" [disabled]="!studentForm.valid">
      <mat-icon [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
      <span>Guardar</span>
    </button>
  </div>
</form>

<form [formGroup]="passwordForm" (ngSubmit)="saveUser()"
    class="flex flex-col p-8 pb-4 mt-8 overflow-hidden shadow bg-card rounded-2xl">
    <div class="flex flex-col space-y-4">
        <mat-form-field>
            <mat-label>Password</mat-label>
            <input matInput type="password" id="password" name="password" formControlName="password" #passwordField />
            <button mat-icon-button type="button" (click)="
                    passwordField.type === 'password'
                        ? (passwordField.type = 'text')
                        : (passwordField.type = 'password')
                " matSuffix>
                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                    [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
            </button>
            <mat-error *ngIf="passwordForm.get('password').hasError('minlength')">
                Mínimo 6 caracteres
            </mat-error>
            <mat-error *ngFor="let err of errors['password']">
                {{ err }}
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Repetir Contraseña</mat-label>
            <input matInput type="password" id="confirm_password" name="confirm_password"
                formControlName="confirm_password" #passwordField2 />
            <button mat-icon-button type="button" (click)="
                    passwordField2.type === 'password'
                        ? (passwordField2.type = 'text')
                        : (passwordField2.type = 'password')
                " matSuffix>
                <mat-icon class="icon-size-5" *ngIf="passwordField2.type === 'password'"
                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                <mat-icon class="icon-size-5" *ngIf="passwordField2.type === 'text'"
                    [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
            </button>
            <mat-error *ngIf="passwordForm.get('confirm_password').hasError('minlength')">
                Mínimo 6 caracteres
            </mat-error>
        </mat-form-field>
        <mat-error *ngIf="error">
            {{ error }}
        </mat-error>
    </div>

    <div class="flex items-center justify-end mt-10">
        <button class="px-6 ml-3" mat-flat-button [color]="'primary'" type="submit" [disabled]="!passwordForm.valid">
            Guardar
        </button>
    </div>
</form>
